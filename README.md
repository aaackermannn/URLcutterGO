üîó URL Shortener

–ü—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ —Å –≤–µ–±‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ REST API.

‚Äî –ö–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ –≤–∏–¥–∞ `http://localhost:8080/abc123`
‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –∏ –ø–æ–¥—Å—á—ë—Ç –∫–ª–∏–∫–æ–≤
‚Äî –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö URL (–±–µ–∑ –¥—É–±–ª–µ–π)
‚Äî –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `web/` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è


–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏

- Backend: Go 1.21+, `github.com/gorilla/mux`
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤: –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∞—è (`pkg/shortener`)
- –í–µ–±‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: —á–∏—Å—Ç—ã–π HTML/CSS/JS (`web/`)
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: Dockerfile, docker‚Äëcompose


–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø–∞–ø–∫–∏)

- `cmd/main.go` ‚Äî –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π HTTP‚Äë—Å–µ—Ä–≤–µ—Ä —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø–æ–º –∫ –ë–î –Ω–∞–ø—Ä—è–º—É—é
- `internal/` ‚Äî ¬´—Å–ª–æ–∏—Å—Ç–∞—è¬ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
  - `internal/handler` ‚Äî HTTP‚Äë–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–≤–µ—Ä—Ö —Å–µ—Ä–≤–∏—Å–∞
  - `internal/service` ‚Äî –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å—á—ë—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤
  - `internal/repository` ‚Äî –¥–æ—Å—Ç—É–ø –∫ –ë–î (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
  - `internal/models` ‚Äî –º–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –∏ —Å—É—â–Ω–æ—Å—Ç–µ–π
- `pkg/shortener` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã
- `web/` ‚Äî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥: —Ñ–æ—Ä–º–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ç–µ—Å—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞

–°—Ü–µ–Ω–∞—Ä–∏–π A: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å MySQL (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å `cmd/main.go`)

1) –ü–æ–¥–Ω–∏–º–∏—Ç–µ MySQL 8.0 –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Docker):

   ```bash
   docker run --name url-mysql -e MYSQL_ROOT_PASSWORD=root -e MYSQL_DATABASE=url_shortener -e MYSQL_USER=urluser -e MYSQL_PASSWORD=password -p 3306:3306 -d mysql:8
   ```

2) –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ DSN –≤ `cmd/main.go` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

   ```
   urluser:password@tcp(localhost:3306)/url_shortener?parseTime=true
   ```

3) –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:

   ```bash
   go mod download
   go run ./cmd
   ```

4) –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `http://localhost:8080`


API

- POST `/api/v1/shorten`
  - –¢–µ–ª–æ: `{ "url": "https://example.com" }`
  - –û—Ç–≤–µ—Ç: `201` `{ "short_url": "abc123" }` (–∏–ª–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –¥–ª—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)

- GET `/api/v1/url/{short}`
  - –û—Ç–≤–µ—Ç: `200` —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
    ```json
    {
      "id": "abc123",
      "original_url": "https://example.com",
      "short_url": "abc123",
      "created_at": "2025-10-15T12:00:00Z",
      "clicks": 3
    }
    ```
  - `404`, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

- GET `/{short}`
  - 302/Found —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å—á—ë—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤

- GET `/health`
  - `200 OK` ‚Äî —Å–µ—Ä–≤–∏—Å –∂–∏–≤


–í–µ–±‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`web/`)

–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ—Ä–Ω–µ `http://localhost:8080` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API:

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏ (—Ñ–æ—Ä–º–∞ ¬´–°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É¬ª)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–º—É –∫–æ–¥—É
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞, —á–µ—Ä–µ–∑ —Ä—É—á–Ω–æ–π fetch —Å `redirect: 'manual'`)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ API/–ë–î (—Ä–∞–∑–¥–µ–ª ¬´–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã¬ª)


–°–±–æ—Ä–∫–∞ –≤ Docker

```bash
cd URLcutter
docker build -t urlcutter-app .
docker run --rm -p 8080:8080 --name urlcutter-app urlcutter-app
```

–ó–∞–º–µ—á–∞–Ω–∏–µ: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –±–∏–Ω–∞—Ä—å, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∏–∑ `cmd/main.go`. –û–Ω –æ–∂–∏–¥–∞–µ—Ç MySQL –Ω–∞ `localhost:3306`, —Ç–∞–∫ —á—Ç–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ª–∏–±–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ —Å–µ—Ç—å/—Ö–æ—Å—Ç, –ª–∏–±–æ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ MySQL –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏ Docker –∏ –º–µ–Ω—è–π—Ç–µ DSN –Ω–∞ —Å–µ—Ä–≤–∏—Å–Ω–æ–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ë–î.


–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–Ω–µ—Å—Ç–∏)

–°–µ–π—á–∞—Å DSN –∑–∞—à–∏—Ç —Å—Ç—Ä–æ–∫–æ–π –≤ `cmd/main.go`. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω‚Äë–ø–æ–¥—Ö–æ–¥–∞ –≤—ã–Ω–µ—Å–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —á–∏—Ç–∞–π—Ç–µ –∏—Ö –≤ `main`:

- `DB_DRIVER` ‚Äî `mysql` –∏–ª–∏ `postgres`
- `DB_DSN` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `urluser:password@tcp(db:3306)/url_shortener?parseTime=true` –¥–ª—è MySQL –≤ Docker)


–¢–µ—Å—Ç—ã

- –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞/—Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `internal/service/service_test.go`, `internal/handler/handler_test.go`.
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

  ```bash
  go test ./...
  ```


–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏ –±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- –ü—Ä–∏–≤–µ—Å—Ç–∏ –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–µ–∫—É –ë–î: –ª–∏–±–æ –≤–µ–∑–¥–µ MySQL, –ª–∏–±–æ –≤–µ–∑–¥–µ PostgreSQL
- –í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ë–î –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ `docker-compose`
- –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `golang-migrate`)
- –°–æ–±—Ä–∞—Ç—å –µ–¥–∏–Ω—ã–π `main` –Ω–∞ –±–∞–∑–µ `internal/*` —Å DI –∏ –∫–æ–Ω—Ñ–∏–≥–æ–º
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –æ—Ç–≤–µ—Ç—ã API (–∫–æ–¥—ã/—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)


–õ–∏—Ü–µ–Ω–∑–∏—è

–°–º. `LICENSE` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.